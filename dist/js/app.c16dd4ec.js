(function(t){function e(e){for(var n,r,i=e[0],l=e[1],s=e[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,s||[]),c()}function c(){for(var t,e=0;e<a.length;e++){for(var c=a[e],n=!0,i=1;i<c.length;i++){var l=c[i];0!==o[l]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=c[0]))}return t}var n={},o={app:0},a=[];function r(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,r),c.l=!0,c.exports}r.m=t,r.c=n,r.d=function(t,e,c){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(r.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(c,n,function(e){return t[e]}.bind(null,n));return c},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/hex-week7/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var s=0;s<i.length;s++)e(i[s]);var u=l;a.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23"),o=c("7bb1"),a=c("3aa8"),r=c("cbdf"),i=c("9457");function l(t,e,c,o,a,r){var i=Object(n["x"])("router-view");return Object(n["s"])(),Object(n["d"])("div",null,[Object(n["g"])(i)])}var s={data:function(){return{apiInfo:{apiPath:"https://vue3-course-api.hexschool.io",apiName:"bustour"}}},provide:function(){return{apiInfo:this.apiInfo}}};s.render=l;var u=s,d=c("6c02"),p={class:"box-border"},b={class:"flex flex-row px-6 justify-between\n      container max-w-4xl lg:max-w-6xl mx-auto mt-6 mb-6"},g=Object(n["g"])("div",null,[Object(n["g"])("a",{href:""},"Logo")],-1),m={id:"nav",class:"flex flex-row"},f=Object(n["f"])("Home"),j=Object(n["f"])(" Item"),O=Object(n["f"])(" Blog"),h=Object(n["f"])(" Cart"),v={class:"container max-w-4xl lg:max-w-6xl mx-auto p-6 flex justify-center"},P=Object(n["g"])("small",{class:"p-1"},"Copyright © 2021",-1),x=Object(n["f"])(" | "),y={class:"p-1"},w=Object(n["f"])("後台管理");function _(t,e){var c=Object(n["x"])("router-link"),o=Object(n["x"])("router-view");return Object(n["s"])(),Object(n["d"])("div",p,[Object(n["g"])("nav",b,[g,Object(n["g"])("div",m,[Object(n["g"])(c,{to:"/",class:"p-4 text-lg border-l-2 border-r-2\n          hover:text-yellow-900 hover:bg-gray-50"},{default:Object(n["G"])((function(){return[f]})),_:1}),Object(n["g"])(c,{to:{name:"Products"},class:"p-4 text-lg border-r-2\n          hover:text-yellow-900 hover:bg-gray-50"},{default:Object(n["G"])((function(){return[j]})),_:1}),Object(n["g"])(c,{to:{name:"Blog"},class:"p-4 text-lg border-r-2\n          hover:text-yellow-900 hover:bg-gray-50"},{default:Object(n["G"])((function(){return[O]})),_:1}),Object(n["g"])(c,{to:{name:"Cart"},class:"p-4 text-lg border-r-2\n          hover:text-yellow-900 hover:bg-gray-50"},{default:Object(n["G"])((function(){return[h]})),_:1})])]),Object(n["g"])("div",null,[Object(n["g"])(o)]),Object(n["g"])("footer",null,[Object(n["g"])("div",v,[P,x,Object(n["g"])("small",y,[Object(n["g"])(c,{to:{name:"Login"}},{default:Object(n["G"])((function(){return[w]})),_:1})])])])])}const k={};k.render=_;var I=k,M={class:"container max-w-4xl lg:max-w-6xl mx-auto\n    flex flex-row px-6 justify-center"},U=Object(n["g"])("div",{class:"text-lg"}," 簡介 ",-1);function A(t,e){return Object(n["s"])(),Object(n["d"])("div",M,[U])}const C={};C.render=A;var N=C,$=(c("a4d3"),c("e01a"),Object(n["g"])("div",null,"this is navigation",-1)),S={class:"grid grid-cols-2 lg:grid-cols-3 p-6"},q={class:"mb-4"},V={class:"line-through text-gray-500"};function E(t,e,c,o,a,r){var i=Object(n["x"])("router-link");return Object(n["s"])(),Object(n["d"])(n["a"],null,[$,Object(n["g"])("div",S,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.products,(function(t){return Object(n["s"])(),Object(n["d"])("div",{class:"border p-6",key:t.id},[Object(n["g"])(i,{to:{name:"Product",params:{id:"".concat(t.id)}}},{default:Object(n["G"])((function(){return[Object(n["g"])("img",{src:t.imageUrl,alt:"",class:"w-auto"},null,8,["src"]),Object(n["g"])("div",null,Object(n["A"])(t.title),1),Object(n["g"])("div",q,Object(n["A"])(t.description),1),Object(n["g"])("div",null,[Object(n["g"])("span",V,Object(n["A"])(a.currency)+Object(n["A"])(t.origin_price),1),Object(n["f"])(" "+Object(n["A"])(a.currency)+Object(n["A"])(t.price),1)])]})),_:2},1032,["to"])])})),128))])],64)}c("99af");var L=c("bc3a"),G=c.n(L),H={data:function(){return{products:[],currency:"¥"}},inject:["apiInfo"],methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;G.a.get("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/products?page=").concat(e)).then((function(e){e.data.success?(console.log(e.data.products),t.products=e.data.products):console.log(e.data)})).catch((function(t){console.log(t)}))}},created:function(){this.getProducts()}};H.render=E;var D=H,B={class:"container max-w-4xl lg:max-w-6xl mx-auto mt-6 mb-6"},T={class:"text-2xl pr-10 py-10"},z={class:"flex flex-row justify-between"},F={class:""},J={class:"bg-gray-100 text-gray-700 py-10 px-20"},W={class:"mb-2"},Q=Object(n["f"])("Price "),K={class:"text-red-600 font-bold"},R={class:"mb-2"},X=Object(n["f"])("Qty ");function Y(t,e,c,o,a,r){return Object(n["s"])(),Object(n["d"])("div",B,[Object(n["g"])("div",T,Object(n["A"])(a.product.title),1),Object(n["g"])("img",{src:a.product.imageUrl,alt:"",class:"w-auto mb-10"},null,8,["src"]),Object(n["g"])("div",z,[Object(n["g"])("div",F,Object(n["A"])(a.product.content),1),Object(n["g"])("div",J,[Object(n["g"])("div",W,[Q,Object(n["g"])("span",K,Object(n["A"])(a.currency)+Object(n["A"])(a.product.price),1)]),Object(n["g"])("div",R,[X,Object(n["H"])(Object(n["g"])("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.qty=t}),class:"border w-10 p-1 w-20"},null,512),[[n["D"],a.qty,void 0,{number:!0}]])]),Object(n["g"])("button",{class:"border p-2 bg-white hover:bg-gray-50",onClick:e[2]||(e[2]=function(t){return r.addCart(a.product.id,a.qty)})},"add to cart")])])])}var Z={data:function(){return{product:{},currency:"¥",qty:1}},inject:["apiInfo"],methods:{getProduct:function(t){var e=this;G.a.get("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/product/").concat(t)).then((function(t){t.data.success?(console.log(t.data.product),e.product=t.data.product):console.log(t.data)})).catch((function(t){console.log(t)}))},addCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c={product_id:t,qty:e};console.log(c),G.a.post("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/cart"),{data:c}).then((function(t){t.data.success?(alert(t.data.message),console.log(t.data)):(console.log(t.data),alert(t.data.message))})).catch((function(t){console.log(t)}))}},created:function(){console.log(this.$route.params);var t=this.$route.params.id;this.getProduct(t)}};Z.render=Y;var tt=Z,et={class:"container max-w-4xl lg:max-w-6xl mx-auto mt-6 mb-6"},ct=Object(n["g"])("div",null,[Object(n["g"])("h2",null,"購物車")],-1),nt={class:"mx-auto"},ot=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",null,"貨品"),Object(n["g"])("th",null,"數量"),Object(n["g"])("th",null,"小計"),Object(n["g"])("th")])],-1),at={key:1},rt=Object(n["f"])("填寫送貨資料");function it(t,e,c,o,a,r){var i=Object(n["x"])("router-link");return Object(n["s"])(),Object(n["d"])("div",et,[ct,Object(n["g"])("div",null,[Object(n["g"])("table",nt,[ot,Object(n["g"])("tbody",null,[a.cart.carts?(Object(n["s"])(!0),Object(n["d"])(n["a"],{key:0},Object(n["w"])(a.cart.carts,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{key:t.id},[Object(n["g"])("td",null,Object(n["A"])(t.product.title),1),Object(n["g"])("td",null,[Object(n["H"])(Object(n["g"])("input",{class:"w-20",type:"number",min:"1","onUpdate:modelValue":function(e){return t.qty=e},onChange:function(e){return r.updateCart(t)}},null,40,["onUpdate:modelValue","onChange"]),[[n["D"],t.qty,void 0,{number:!0}]])]),Object(n["g"])("td",null,Object(n["A"])(t.total),1),Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"border",onClick:function(e){return r.deleteOne(t)}},"刪除",8,["onClick"])])])})),128)):Object(n["e"])("",!0),0!==a.cart.total?(Object(n["s"])(),Object(n["d"])("tr",at,[Object(n["g"])("td",null," 合計: "+Object(n["A"])(a.cart.final_total),1),Object(n["g"])("td",null,[Object(n["g"])("button",{type:"button",class:"border",onClick:e[1]||(e[1]=function(){return r.deleteAll&&r.deleteAll.apply(r,arguments)})},"刪除全部")])])):Object(n["e"])("",!0)])]),Object(n["g"])(i,{to:{name:"DeliveryInfo"}},{default:Object(n["G"])((function(){return[rt]})),_:1})])])}var lt={data:function(){return{cart:{},products:[],currency:"¥"}},inject:["apiInfo"],methods:{getCart:function(){var t=this;G.a.get("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/cart")).then((function(e){e.data.success?(t.cart=e.data.data,console.log(t.cart)):console.log(e.data)})).catch((function(t){console.log(t)}))},updateCart:function(t){var e=this,c={product_id:t.product.id,qty:t.qty};G.a.put("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/cart/").concat(t.id),{data:c}).then((function(t){t.data.success?(console.log(t.data),e.getCart()):console.log(t.data)})).catch((function(t){console.log(t)}))},deleteOne:function(t){var e=this;G.a.delete("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/cart/").concat(t.id)).then((function(t){t.data.success?(console.log(t.data),alert(t.data.message),e.getCart()):console.log(t.data)})).catch((function(t){console.log(t)}))},deleteAll:function(){var t=this;G.a.delete("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/carts")).then((function(e){e.data.success?(console.log(e.data),alert(e.data.message),t.getCart()):console.log(e.data)})).catch((function(t){console.log(t)}))}},created:function(){this.getCart()}};lt.render=it;var st=lt,ut=(c("b0c0"),{class:"my-5 row justify-content-center"}),dt={class:"mb-3"},pt=Object(n["g"])("label",{for:"email",class:"form-label"},"Email",-1),bt={class:"mb-3"},gt=Object(n["g"])("label",{for:"name",class:"form-label"},"收件人姓名",-1),mt={class:"mb-3"},ft=Object(n["g"])("label",{for:"tel",class:"form-label"},"收件人電話",-1),jt={class:"mb-3"},Ot=Object(n["g"])("label",{for:"address",class:"form-label"},"收件人地址",-1),ht={class:"mb-3"},vt=Object(n["g"])("label",{for:"message",class:"form-label"},"留言",-1),Pt=Object(n["g"])("div",{class:"text-end"},[Object(n["g"])("button",{type:"submit",class:"btn btn-danger"},"建立訂單")],-1);function xt(t,e,c,o,a,r){var i=Object(n["x"])("Field"),l=Object(n["x"])("error-message"),s=Object(n["x"])("Form");return Object(n["s"])(),Object(n["d"])("div",null,[Object(n["g"])("div",ut,[Object(n["g"])(s,{class:"col-md-6",onSubmit:r.createOrder},{default:Object(n["G"])((function(t){var c=t.errors;return[Object(n["g"])("div",dt,[pt,Object(n["g"])(i,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:a.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=function(t){return a.form.user.email=t})},null,8,["class","modelValue"]),Object(n["g"])(l,{name:"email",class:"invalid-feedback"})]),Object(n["g"])("div",bt,[gt,Object(n["g"])(i,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:a.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return a.form.user.name=t})},null,8,["class","modelValue"]),Object(n["g"])(l,{name:"姓名",class:"invalid-feedback"})]),Object(n["g"])("div",mt,[ft,Object(n["g"])(i,{id:"tel",name:"電話",type:"text",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入電話",rules:"required",modelValue:a.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return a.form.user.tel=t})},null,8,["class","modelValue"]),Object(n["g"])(l,{name:"電話",class:"invalid-feedback"})]),Object(n["g"])("div",jt,[Ot,Object(n["g"])(i,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:a.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return a.form.user.address=t})},null,8,["class","modelValue"]),Object(n["g"])(l,{name:"地址",class:"invalid-feedback"})]),Object(n["g"])("div",ht,[vt,Object(n["H"])(Object(n["g"])("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=function(t){return a.form.message=t})},null,512),[[n["D"],a.form.message]])]),Pt]})),_:1},8,["onSubmit"])])])}var yt=c("5530"),wt={data:function(){return{form:{user:{}}}},inject:["apiInfo"],methods:{createOrder:function(){var t=this,e=Object(yt["a"])({},this.form);G.a.post("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/order"),{data:e}).then((function(e){e.data.success?(console.log(e.data),alert(e.data.message),t.$router.push({name:"Order",params:{id:e.data.orderId}})):console.log(e.data)})).catch((function(t){console.log(t)}))}}};wt.render=xt;var _t=wt,kt={class:"container mx-auto "};function It(t,e,c,o,a,r){return Object(n["s"])(),Object(n["d"])("div",kt,[Object(n["f"])(Object(n["A"])(a.order)+" ",1),Object(n["g"])("div",null,[Object(n["g"])("div",null,"status: "+Object(n["A"])(a.order.is_paid),1),Object(n["g"])("div",null,"price:"+Object(n["A"])(a.order.total),1)]),Object(n["g"])("div",null,[Object(n["g"])("button",{class:"border",onClick:e[1]||(e[1]=function(t){return r.completePayment(a.order.id)})},"Paid")])])}var Mt={data:function(){return{order:{}}},inject:["apiInfo"],methods:{getOrder:function(t){var e=this;G.a.get("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/order/").concat(t)).then((function(t){t.data.success?(console.log(t.data),e.order=t.data.order):console.log(t.data)})).catch((function(t){console.log(t)}))},completePayment:function(t){var e=this;G.a.post("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/pay/").concat(t)).then((function(t){t.data.success?(console.log(t.data),e.$router.push({name:"OrderComplete"})):console.log(t.data)})).catch((function(t){console.log(t)}))}},created:function(){console.log(this.$route.params);var t=this.$route.params.id;this.getOrder(t)}};Mt.render=It;var Ut=Mt,At={class:"container mx-auto"},Ct=Object(n["g"])("div",null,"已成功付款",-1),Nt=Object(n["f"])("首頁");function $t(t,e){var c=Object(n["x"])("router-link");return Object(n["s"])(),Object(n["d"])("div",At,[Ct,Object(n["g"])("div",null,[Object(n["g"])(c,{to:{name:"Home"},class:"border p-1 "},{default:Object(n["G"])((function(){return[Nt]})),_:1})])])}const St={};St.render=$t;var qt=St;function Vt(t,e){return Object(n["s"])(),Object(n["d"])("div",null," This is blog ")}const Et={};Et.render=Vt;var Lt=Et,Gt={class:"container max-w-4xl lg:max-w-6xl mx-auto p-6 flex justify-center"},Ht=Object(n["g"])("small",{class:"p-1"},"Copyright © 2021",-1),Dt=Object(n["f"])(" | "),Bt={class:"p-1"},Tt=Object(n["f"])("首頁"),zt=Object(n["f"])(" | "),Ft={class:"p-1"};function Jt(t,e,c,o,a,r){var i=Object(n["x"])("router-view"),l=Object(n["x"])("router-link");return Object(n["s"])(),Object(n["d"])(n["a"],null,[Object(n["g"])("div",null,[Object(n["g"])(i)]),Object(n["g"])("footer",null,[Object(n["g"])("div",Gt,[Ht,Dt,Object(n["g"])("small",Bt,[Object(n["g"])(l,{to:{name:"Home"}},{default:Object(n["G"])((function(){return[Tt]})),_:1})]),zt,Object(n["g"])("small",Ft,[Object(n["g"])("button",{onClick:e[1]||(e[1]=function(){return r.adminLogout&&r.adminLogout.apply(r,arguments)})},"登出")])])])],64)}c("ac1f"),c("5319");var Wt={inject:["apiInfo"],methods:{checkLogin:function(){var t=this;G.a.post("".concat(this.apiInfo.apiPath,"/api/user/check")).then((function(e){e.data.success?(t.$router.push("Edit"),console.log(e.data)):(console.log(e.data),t.$router.push("Login"))})).catch((function(t){console.log(t)}))},adminLogout:function(){var t=this;G.a.post("".concat(this.apiInfo.apiPath,"/logout/")).then((function(e){console.log(e.data),e.data.success&&(document.cookie="OnlineBusTour = ; expires = ".concat(new Date),t.$router.push("login"))})).catch((function(t){console.log(t.response.data)}))}},created:function(){var t=document.cookie.replace(/(?:(?:^|.*;\s*)OnlineBusTour\s*=\s*([^;]*).*$)|^.*$/,"$1");G.a.defaults.headers.common.Authorization=t,this.checkLogin()}};Wt.render=Jt;var Qt=Wt,Kt={class:"container max-w-4xl lg:max-w-6xl mx-auto p-6 flex justify-center"},Rt={id:"login"},Xt={key:0,class:"error-msg text-center mb-2"},Yt={class:"flex flex-row justify-center"},Zt=Object(n["g"])("h1",{class:"text-xl"},"後台登入",-1),te={class:"mb-2"},ee=Object(n["g"])("label",{for:"inputEmail",class:"sr-only"},"Email address",-1),ce={class:"mb-2"},ne=Object(n["g"])("label",{for:"inputPassword",class:"sr-only"},"Password",-1),oe={class:""};function ae(t,e,c,o,a,r){return Object(n["s"])(),Object(n["d"])("div",Kt,[Object(n["g"])("div",Rt,[a.errMsg?(Object(n["s"])(),Object(n["d"])("div",Xt,Object(n["A"])(a.errMsg),1)):Object(n["e"])("",!0),Object(n["g"])("form",Yt,[Object(n["g"])("div",null,[Zt,Object(n["g"])("div",te,[ee,Object(n["H"])(Object(n["g"])("input",{type:"email",id:"inputEmail",class:"p-2 border",placeholder:"Email address",required:"",autofocus:"","onUpdate:modelValue":e[1]||(e[1]=function(t){return a.logginUser.username=t})},null,512),[[n["D"],a.logginUser.username]])]),Object(n["g"])("div",ce,[ne,Object(n["H"])(Object(n["g"])("input",{type:"password",id:"inputPassword",class:"p-2 border",placeholder:"Password",required:"","onUpdate:modelValue":e[2]||(e[2]=function(t){return a.logginUser.password=t})},null,512),[[n["D"],a.logginUser.password]])]),Object(n["g"])("div",oe,[Object(n["g"])("button",{class:"border px-6",type:"button",onClick:e[3]||(e[3]=function(){return r.authLogin&&r.authLogin.apply(r,arguments)})},"登入")])])])])])}var re={data:function(){return{logginUser:{username:"",password:""},errMsg:""}},inject:["apiInfo"],methods:{authLogin:function(){var t=this;console.log("authloggin",this.logginUser),G.a.post("".concat(this.apiInfo.apiPath,"/admin/signin"),this.logginUser).then((function(e){e.data.success&&(document.cookie="OnlineBusTour=".concat(e.data.token,"; expires=").concat(new Date(e.data.expired)),t.errMsg="",t.$router.push("Edit"),console.log("login success")),e.data.success||(t.errMsg=e.data.message,console.log(e.data.message),t.$router.push("Login"))})).catch((function(t){console.log(t.response.data)}))}}};re.render=ae;var ie=re,le={class:"container max-w-4xl lg:max-w-6xl mx-auto p-6 flex justify-center"},se={id:"backend"},ue=Object(n["g"])("h3",{class:"text-center"},"後台管理",-1),de={id:"admin-product",class:""},pe={class:"table"},be=Object(n["g"])("thead",null,[Object(n["g"])("tr",null,[Object(n["g"])("th",{scope:""},"名稱"),Object(n["g"])("th",{scope:""},"說明"),Object(n["g"])("th",{scope:""},"圖片"),Object(n["g"])("th",{scope:""},"原價"),Object(n["g"])("th",{scope:""},"現價"),Object(n["g"])("th",{scope:""},"啟用"),Object(n["g"])("th"),Object(n["g"])("th")])],-1),ge={key:0},me={key:1},fe={class:"text-center"};function je(t,e,c,o,a,r){var i=Object(n["x"])("ProductModal"),l=Object(n["x"])("pagination");return Object(n["s"])(),Object(n["d"])("div",le,[Object(n["g"])("div",se,[ue,Object(n["g"])("button",{id:"add-product",class:"mb-2",type:"button",onClick:e[1]||(e[1]=function(t){return r.showProductModal(!0)})},"新增"),Object(n["g"])(i,{title:a.tempProduct.title,"onUpdate:title":e[2]||(e[2]=function(t){return a.tempProduct.title=t}),category:a.tempProduct.category,"onUpdate:category":e[3]||(e[3]=function(t){return a.tempProduct.category=t}),origin_price:a.tempProduct.origin_price,"onUpdate:origin_price":e[4]||(e[4]=function(t){return a.tempProduct.origin_price=t}),origin_priceModifiers:{number:!0},price:a.tempProduct.price,"onUpdate:price":e[5]||(e[5]=function(t){return a.tempProduct.price=t}),priceModifiers:{number:!0},unit:a.tempProduct.unit,"onUpdate:unit":e[6]||(e[6]=function(t){return a.tempProduct.unit=t}),description:a.tempProduct.description,"onUpdate:description":e[7]||(e[7]=function(t){return a.tempProduct.description=t}),content:a.tempProduct.content,"onUpdate:content":e[8]||(e[8]=function(t){return a.tempProduct.content=t}),imageUrl:a.tempProduct.imageUrl,"onUpdate:imageUrl":e[9]||(e[9]=function(t){return a.tempProduct.imageUrl=t}),is_enabled:a.tempProduct.is_enabled,"onUpdate:is_enabled":e[10]||(e[10]=function(t){return a.tempProduct.is_enabled=t}),is_enabledModifiers:{number:!0},productModalShow:a.productModalShow,"onUpdate:productModalShow":e[11]||(e[11]=function(t){return a.productModalShow=t}),isNew:a.isNew,"onUpdate:isNew":e[12]||(e[12]=function(t){return a.isNew=t}),errMsg:a.errMsg,onHideProductModal:r.hideProductModal,onAddProduct:r.addProduct,onEditProduct:r.editProduct},null,8,["title","category","origin_price","price","unit","description","content","imageUrl","is_enabled","productModalShow","isNew","errMsg","onHideProductModal","onAddProduct","onEditProduct"]),Object(n["g"])("div",de,[Object(n["g"])("table",pe,[be,Object(n["g"])("tbody",null,[(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(a.products,(function(t){return Object(n["s"])(),Object(n["d"])("tr",{key:t.id},[Object(n["g"])("td",null,Object(n["A"])(t.title),1),Object(n["g"])("td",null,Object(n["A"])(t.description),1),Object(n["g"])("td",null,[Object(n["g"])("img",{class:"w-20",src:t.imageUrl,alt:""},null,8,["src"])]),Object(n["g"])("td",null,Object(n["A"])(a.currency)+Object(n["A"])(t.origin_price),1),Object(n["g"])("td",null,Object(n["A"])(a.currency)+Object(n["A"])(t.price),1),t.is_enabled?(Object(n["s"])(),Object(n["d"])("td",ge,"啟用")):(Object(n["s"])(),Object(n["d"])("td",me,"停用")),Object(n["g"])("td",null,[Object(n["g"])("button",{value:"product.id",class:"border",onClick:function(e){return r.getEditProduct(!1,t)}},"修改",8,["onClick"])]),Object(n["g"])("td",fe,[Object(n["g"])("button",{value:"product.id",class:"border",onClick:function(e){return r.deleteProduct(t.id)}},"刪除",8,["onClick"])])])})),128))])])]),Object(n["g"])(l,{page:a.pagination,onGetProductPage:r.getProductAdmin,onPreviousPage:r.getProductAdmin,onNextPage:r.getProductAdmin},null,8,["page","onGetProductPage","onPreviousPage","onNextPage"])])])}c("159b");var Oe={class:"border-box"},he=Object(n["g"])("div",{class:"bg-black fixed z-10 inset-0 opacity-30"},null,-1),ve={class:"fixed inset-0 z-20"},Pe={class:"flex justify-center items-center h-screen"},xe={class:"bg-white p-10 rounded-xl"},ye={key:0,class:"text-center mb-2 "},we={key:1,class:"text-center mb-2 "},_e={class:"flex flex-row"},ke={class:"mr-2"},Ie={for:"imageUrl",class:"form-label"},Me=Object(n["f"])("圖片地址 "),Ue={class:"grid grid-cols-2 gap-2 mb-4"},Ae={for:"category"},Ce=Object(n["f"])("分類 "),Ne={for:"title"},$e=Object(n["f"])("標題 "),Se={for:"description"},qe=Object(n["f"])("說明 "),Ve={for:"content"},Ee=Object(n["f"])("內容 "),Le={for:"origin_price"},Ge=Object(n["f"])("原價 "),He={for:"price"},De=Object(n["f"])("現價 "),Be={for:"unit"},Te=Object(n["f"])("單位 "),ze={for:"is_enabled"},Fe=Object(n["f"])("是否啟用 "),Je=Object(n["g"])("option",{value:"1"},"啟用",-1),We=Object(n["g"])("option",{value:"0"},"停用",-1),Qe={class:"flex flex-row justify-end"};function Ke(t,e,c,o,a,r){return Object(n["s"])(),Object(n["d"])("div",{id:"Modal",class:{hidden:!c.productModalShow}},[Object(n["g"])("div",Oe,[he,Object(n["g"])("div",ve,[Object(n["g"])("div",Pe,[Object(n["g"])("div",xe,[c.isNew?(Object(n["s"])(),Object(n["d"])("h3",ye,"新增產品")):(Object(n["s"])(),Object(n["d"])("h3",we,"修改產品內容")),(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(c.errMsg,(function(t){return Object(n["s"])(),Object(n["d"])("div",{class:"text-red-500",key:t},Object(n["A"])(t),1)})),128)),Object(n["g"])("div",_e,[Object(n["g"])("div",ke,[Object(n["g"])("img",{class:"w-auto",src:c.imageUrl,alt:""},null,8,["src"]),Object(n["g"])("label",Ie,[Me,Object(n["g"])("input",{id:"imageUrl",class:"border p-2",name:"imageUrl",type:"url",value:c.imageUrl,onInput:e[1]||(e[1]=function(e){return t.$emit("update:imageUrl",e.target.value)})},null,40,["value"])])]),Object(n["g"])("div",Ue,[Object(n["g"])("label",Ae,[Ce,Object(n["g"])("input",{id:"category",class:"border p-2",name:"category",type:"text",value:c.category,onInput:e[2]||(e[2]=function(e){return t.$emit("update:category",e.target.value)}),required:""},null,40,["value"])]),Object(n["g"])("label",Ne,[$e,Object(n["g"])("input",{id:"title",class:"border p-2",name:"title",value:c.title,type:"text",onInput:e[3]||(e[3]=function(e){return t.$emit("update:title",e.target.value)}),required:""},null,40,["value"])]),Object(n["g"])("label",Se,[qe,Object(n["g"])("input",{id:"description",class:"border p-2",name:"description",type:"text",value:c.description,onInput:e[4]||(e[4]=function(e){return t.$emit("update:description",e.target.value)}),required:""},null,40,["value"])]),Object(n["g"])("label",Ve,[Ee,Object(n["g"])("input",{id:"content",class:"border p-2",name:"content",type:"textarea",value:c.content,onInput:e[5]||(e[5]=function(e){return t.$emit("update:content",e.target.value)}),required:""},null,40,["value"])]),Object(n["g"])("label",Le,[Ge,Object(n["g"])("input",{id:"origin_price",class:"border p-2",name:"origin_price",type:"number",min:"0",value:c.origin_price,onInput:e[6]||(e[6]=function(e){return t.$emit("update:origin_price",e.target.value)}),required:""},null,40,["value"])]),Object(n["g"])("label",He,[De,Object(n["g"])("input",{id:"price",class:"border p-2",name:"price",type:"number",min:"0",value:c.price,onInput:e[7]||(e[7]=function(e){return t.$emit("update:price",e.target.value)})},null,40,["value"])]),Object(n["g"])("label",Be,[Te,Object(n["g"])("input",{id:"unit",class:"border p-2",name:"unit",type:"text",value:c.unit,onInput:e[8]||(e[8]=function(e){return t.$emit("update:unit",e.target.value)})},null,40,["value"])]),Object(n["g"])("label",ze,[Fe,Object(n["g"])("select",{id:"is_enabled",class:"border p-1 text-black",name:"is_enabled",value:c.is_enabled,onInput:e[9]||(e[9]=function(e){return t.$emit("update:is_enabled",e.target.value)})},[Je,We],40,["value"])])])]),Object(n["g"])("div",Qe,[Object(n["g"])("button",{class:"border ml-2 p-2",onClick:e[10]||(e[10]=function(){return r.hideProductModal&&r.hideProductModal.apply(r,arguments)})}," 取消 "),c.isNew?(Object(n["s"])(),Object(n["d"])("button",{key:0,class:"border ml-2 p-2",onClick:e[11]||(e[11]=function(){return r.addProduct&&r.addProduct.apply(r,arguments)})}," 新增 ")):(Object(n["s"])(),Object(n["d"])("button",{key:1,class:"border ml-2 p-2",onClick:e[12]||(e[12]=function(){return r.editProduct&&r.editProduct.apply(r,arguments)})}," 修改 "))])])])])])],2)}c("a9e3");var Re={data:function(){return{}},props:{title:String,category:String,origin_price:Number,price:Number,unit:String,description:String,content:String,imageUrl:String,is_enabled:Number,productModalShow:Boolean,isNew:Boolean,errMsg:Array},methods:{hideProductModal:function(){this.$emit("hideProductModal")},addProduct:function(){this.$emit("addProduct")},editProduct:function(){this.$emit("editProduct")}}};Re.render=Ke;var Xe=Re,Ye={"aria-label":"Page navigation example",class:""},Ze={class:"pagination flex flex-row"},tc=Object(n["g"])("span",{"aria-hidden":"true"},"«",-1),ec=Object(n["g"])("span",{"aria-hidden":"true"},"»",-1);function cc(t,e,c,o,a,r){return Object(n["s"])(),Object(n["d"])("nav",Ye,[Object(n["g"])("ul",Ze,[Object(n["g"])("li",{class:["p-2",{disabled:!c.page.has_pre}]},[Object(n["g"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[1]||(e[1]=function(e){return t.$emit("previous-page",c.page.current_page-1)})},[tc])],2),(Object(n["s"])(!0),Object(n["d"])(n["a"],null,Object(n["w"])(c.page.total_pages,(function(e){return Object(n["s"])(),Object(n["d"])("li",{class:["p-2",{active:e===c.page.current_page}],key:e},[Object(n["g"])("button",{class:"page-link",onClick:function(c){return t.$emit("get-product-page",e)}},Object(n["A"])(e),9,["onClick"])],2)})),128)),Object(n["g"])("li",{class:["p-2",{disabled:!c.page.has_next}]},[Object(n["g"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[2]||(e[2]=function(e){return t.$emit("next-page",c.page.current_page+1)})},[ec])],2)])])}var nc={props:["page"]};nc.render=cc;var oc=nc,ac={components:{ProductModal:Xe,Pagination:oc},data:function(){return{products:[],currency:"¥",tempProduct:{},errMsg:[],pagination:{},productModalShow:!1,isNew:!1}},inject:["apiInfo"],methods:{getProductAdmin:function(t){var e=this;this.products=[],G.a.get("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/admin/products?page=").concat(t)).then((function(t){console.log(t.data.products),t.data.success&&(e.products=t.data.products,e.pagination=t.data.pagination)})).catch((function(t){console.log(t.response.data),e.error()}))},showProductModal:function(t){this.errMsg=[],this.productModalShow=!this.productModalShow,this.isNew=t},hideProductModal:function(){this.tempProduct={},this.errMsg=[],this.productModalShow=!1},addProduct:function(){var t=this;G.a.post("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/admin/product"),{data:{title:this.tempProduct.title,category:this.tempProduct.category,origin_price:this.tempProduct.origin_price,price:this.tempProduct.price,unit:this.tempProduct.unit,description:this.tempProduct.description,content:this.tempProduct.content,imageUrl:this.tempProduct.imageUrl,is_enabled:this.tempProduct.is_enabled}}).then((function(e){e.data.success?(t.tempProduct={},t.hideProductModal(),t.getProductAdmin()):e.data.message.forEach((function(e){t.errMsg.push(e)}))})).catch((function(t){console.log(t.response.data)}))},getEditProduct:function(t,e){var c=this;this.products.forEach((function(t){t.id===e.id&&(console.log(t),Object.assign(c.tempProduct,t))})),console.log(this.tempProduct),this.showProductModal(t)},editProduct:function(){var t=this;console.log(this.tempProduct.id),G.a.put("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/admin/product/").concat(this.tempProduct.id),{data:{title:this.tempProduct.title,category:this.tempProduct.category,origin_price:this.tempProduct.origin_price,price:this.tempProduct.price,unit:this.tempProduct.unit,description:this.tempProduct.description,content:this.tempProduct.content,imageUrl:this.tempProduct.imageUrl,is_enabled:this.tempProduct.is_enabled}}).then((function(e){e.data.success?(console.log(e),t.hideProductModal(),t.getProductAdmin()):e.data.message.forEach((function(e){t.errMsg.push(e)}))})).catch((function(t){console.log(JSON.stringify(t))}))},deleteProduct:function(t){var e=this;console.log("delete product: ",t),G.a.delete("".concat(this.apiInfo.apiPath,"/api/").concat(this.apiInfo.apiName,"/admin/product/").concat(t)).then((function(t){console.log(t.data),t.data.success?e.getProductAdmin():console.log(t.data)})).catch((function(t){console.log(t.response.data)}))}},mounted:function(){this.getProductAdmin()}};ac.render=je;var rc=ac,ic=[{path:"/",name:"Home",component:I,children:[{path:"",name:"Index",component:N},{path:"products",name:"Products",component:D},{path:"product/:id",name:"Product",component:tt,props:function(t){return{id:t.params.id}}},{path:"cart",name:"Cart",component:st},{path:"deliveryinfo",name:"DeliveryInfo",component:_t},{path:"order/:id",name:"Order",component:Ut,props:function(t){return{id:t.params.id}}},{path:"OrderComplete",name:"OrderComplete",component:qt},{path:"blog",name:"Blog",component:Lt}]},{path:"/admin",name:"Admin",component:Qt,children:[{path:"login",name:"Login",component:ie},{path:"edit",name:"Edit",component:rc}]}],lc=Object(d["a"])({history:Object(d["b"])(),routes:ic}),sc=lc;c("ba8c");Object(o["e"])("required",a["c"]),Object(o["e"])("email",a["a"]),Object(o["e"])("min",a["b"]),Object(o["d"])({generateMessage:Object(r["a"])({zh_TW:i}),validateOnInput:!0}),Object(r["b"])("zh_TW");var uc=Object(n["c"])(u).use(sc);uc.component("Form",o["c"]),uc.component("Field",o["b"]),uc.component("ErrorMessage",o["a"]),uc.mount("#app")},ba8c:function(t,e,c){}});
//# sourceMappingURL=app.c16dd4ec.js.map